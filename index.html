<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Your Dream Career</title>
    <style>
        /* --- VISUAL STYLE (CSS) --- */
        :root {
            --primary: #05ABDF;
            --primary-dark: #0277bd;
            --secondary: #4caf50;
            --bg: #e0f7fa;
            --text: #2c3e50;
        }

        body {
            font-family: 'Verdana', sans-serif;
            margin: 0; padding: 0;
            background-color: var(--bg);
            display: flex; justify-content: center; align-items: center;
            height: 100vh; overflow: hidden;
        }

        /* ANIMATIONS */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }

        #game-container {
            width: 100%; max-width: 500px; height: 95vh;
            background: #ffffff; border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            overflow-y: auto; position: relative;
            text-align: center; padding: 20px;
            display: flex; flex-direction: column;
            box-sizing: border-box;
        }

        /* --- POPUP & FORM STYLES --- */
        #intro-popup {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: white; z-index: 100;
            display: flex; flex-direction: column;
            align-items: center;
            padding: 20px; box-sizing: border-box;
            overflow-y: auto;
            opacity: 0; 
            transition: opacity 0.5s ease;
        }

        /* LOGO STYLE */
        .brand-logo { 
            width: 280px; 
            height: auto; 
            margin-bottom: 10px; 
            display: block;
        }

        .popup-title { font-size: 1.8rem; color: var(--primary); margin: 5px 0 20px 0; text-transform: uppercase; line-height: 1.2; }
        .reg-form { width: 100%; max-width: 300px; display: flex; flex-direction: column; gap: 12px; }
        .input-field { padding: 12px 15px; border: 2px solid #ddd; border-radius: 10px; font-size: 1rem; outline: none; transition: 0.3s; }
        .input-field:focus { border-color: var(--primary); background: #e1f5fe; }
        
        .btn-start {
            margin-top: 10px; padding: 15px 30px; font-size: 1.1rem;
            background: var(--primary); color: white; border: none;
            border-radius: 50px; cursor: pointer; font-weight: bold;
            box-shadow: 0 4px 0 var(--primary-dark); transition: transform 0.1s;
        }
        .btn-start:active { transform: translateY(4px); box-shadow: none; }

        /* LANGUAGE SELECTION STYLES */
        .lang-btn {
            background: white; border: 2px solid var(--primary); color: var(--primary);
            padding: 15px 30px; margin: 10px; border-radius: 15px;
            font-size: 1.2rem; cursor: pointer; font-weight: bold; width: 80%;
            transition: 0.3s;
        }
        .lang-btn:hover { background: var(--primary); color: white; }

        /* ABOUT MODAL STYLES */
        .btn-about {
            background: none; border: none; color: #777; 
            text-decoration: underline; cursor: pointer; margin-top: 15px; font-size: 0.9rem;
        }
        #about-modal {
            background: #fff8e1; border: 2px solid #ffcc80; border-radius: 15px;
            padding: 15px; margin-top: 15px; text-align: left; font-size: 0.9rem;
            display: none; color: #5d4037;
        }
        #about-modal h3 { margin-top: 0; color: #e65100; }

        /* --- GAME UI --- */
        .nav-header {
            display: flex; justify-content: space-between; align-items: center;
            width: 100%; margin-bottom: 10px;
        }

        .btn-back {
            background: #eceff1; color: #546e7a; border: none;
            padding: 8px 15px; border-radius: 20px;
            font-size: 0.9rem; font-weight: bold; cursor: pointer;
            display: flex; align-items: center; gap: 5px;
            transition: background 0.2s;
        }
        .btn-back:hover { background: #cfd8dc; }

        .landscape { min-height: 140px; background: linear-gradient(to bottom, #4fc3f7, #81c784); border-radius: 15px; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; font-size: 4rem; position: relative;}
        h2 { color: var(--text); font-size: 1.1rem; margin: 10px 0; line-height: 1.4; }
        
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; flex-grow: 1; }
        .option-card { background: #f1f8e9; border: 2px solid #c5e1a5; border-radius: 12px; padding: 10px; cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: transform 0.1s, background 0.1s; }
        .option-card:active { transform: scale(0.95); background: #dcedc8; }

        /* --- RESULTS --- */
        .details-box { background: #fff8e1; border-radius: 10px; padding: 15px; margin: 10px 0; text-align: left; border: 2px solid #ffe0b2; }
        .career-box { background: #e8f5e9; border-radius: 10px; padding: 15px; margin: 10px 0; text-align: left; border: 2px solid #c8e6c9; }
        .career-li { background: white; padding: 8px 12px; border-radius: 8px; font-size: 0.9rem; margin-bottom: 5px; border-left: 4px solid var(--secondary); list-style: none; }
        .hidden { display: none !important; }
        
        /* Loading Spinner */
        .loader-spinner {
            border: 4px solid #f3f3f3; border-top: 4px solid var(--primary);
            border-radius: 50%; width: 40px; height: 40px;
            animation: spin 1s linear infinite; margin: 50px auto;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="initial-loader" style="position:absolute; top:40%; left:0; width:100%; text-align:center; z-index: 50;">
            <div class="loader-spinner"></div>
            <p style="color:#777;">Loading Adventure...</p>
        </div>

        <div id="intro-popup">
            <img src="logo.png" alt="ICM Education" class="brand-logo" id="main-logo" onerror="this.src='https://placehold.co/300x100?text=ICM+Logo'">
            
            <div id="language-screen" class="hidden" style="width: 100%; flex-direction: column; align-items: center;">
                <h2 style="color:var(--text); margin-bottom: 20px;">Select Language / ‡¥≠‡¥æ‡¥∑ ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï</h2>
                <button class="lang-btn" onclick="selectLanguage('en')">English</button>
                <button class="lang-btn" onclick="selectLanguage('ml')">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</button>
            </div>

            <div id="form-screen" class="hidden" style="width: 100%; flex-direction: column; align-items: center;">
                <h1 class="popup-title" id="lbl-title">FIND YOUR<br>DREAM CAREER</h1>
                
                <div class="reg-form">
                    <input type="text" id="inp-name" class="input-field" placeholder="Student Name" required>
                    <input type="text" id="inp-class" class="input-field" placeholder="Class / Grade" required>
                    <input type="number" id="inp-age" class="input-field" placeholder="Age" required>
                    <input type="text" id="inp-place" class="input-field" placeholder="Place" required>
                    <input type="tel" id="inp-phone" class="input-field" placeholder="Parent's Phone Number" required>
                    
                    <button class="btn-start" id="btn-start" onclick="validateAndStart()">Start Adventure üöÄ</button>
                </div>

                <button class="btn-about" id="btn-about-toggle" onclick="toggleAbout()">About this Aptitude Quiz ‚ÑπÔ∏è</button>
                
                <div id="about-modal">
                    <h3 id="about-head">The Science: Holland Code (RIASEC)</h3>
                    <p id="about-body">
                        Imagine your personality is a puzzle. This game finds where you fit! It checks if you like <b>Doing</b> (Realistic), <b>Creating</b> (Artistic), <b>Helping</b> (Social), or <b>Leading</b> (Enterprising).
                    </p>
                    <button onclick="toggleAbout()" style="background:var(--primary); color:white; border:none; padding:5px 10px; border-radius:5px; margin-top:5px; cursor:pointer; font-size:0.8rem;">Close</button>
                </div>
            </div>
        </div>

        <div id="game-interface" class="hidden">
            <div class="nav-header">
                <button id="btn-back" class="btn-back hidden" onclick="goBack()">‚¨Ö Back</button>
                <div class="progress-track"><div id="progress-bar"></div></div>
            </div>
            
            <div class="landscape"><span id="scene-emoji">üö©</span></div>
            <h2 id="scenario-text">Loading...</h2>
            <div class="options-grid" id="options-container"></div>
        </div>

        <div id="screen-result" class="hidden">
            <h2 style="color: var(--secondary); margin: 0; font-size: 1rem;">Analysis Complete!</h2>
            <div class="landscape" style="min-height: 90px; background: #fff; margin-bottom: 5px;">
                <span id="result-emoji" style="font-size: 3.5rem;">üèÜ</span>
            </div>
            <h1 id="result-title" style="color: var(--primary); font-size: 1.4rem; text-transform: uppercase; margin: 5px 0;">...</h1>
            
            <div class="details-box">
                <strong style="color: #e65100;">‚ö° Your Personality:</strong>
                <div id="traits-list" style="margin-top:10px; font-size:0.95rem; color:#555;"></div>
            </div>

            <div class="career-box">
                <strong style="color: #2e7d32;">üöÄ Top 5 Future Careers:</strong>
                <ul id="career-list" style="padding:0; margin-top:10px;"></ul>
            </div>
            
            <div id="save-status" style="font-size:0.8rem; color:#888; margin-bottom:10px; min-height: 20px;"></div>
            
            <button class="btn-start" onclick="location.reload()" style="font-size: 0.9rem; padding: 10px 20px;">Play Again</button>
        </div>
    </div>

    <script>
        // --- 1. LOCALIZATION DATA (INTRO) ---
        const translations = {
            en: {
                title: "FIND YOUR<br>DREAM CAREER",
                placeholders: {
                    name: "Student Name",
                    class: "Class / Grade",
                    age: "Age",
                    place: "Place",
                    phone: "Parent's Phone Number"
                },
                btnStart: "Start Adventure üöÄ",
                btnAbout: "About this Aptitude Quiz ‚ÑπÔ∏è",
                aboutHead: "The Science: Holland Code (RIASEC)",
                aboutBody: "Imagine your personality is a puzzle. This game finds where you fit! It checks if you like <b>Doing</b> (Realistic), <b>Creating</b> (Artistic), <b>Helping</b> (Social), or <b>Leading</b> (Enterprising)."
            },
            ml: {
                title: "‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ<br>‡¥∏‡µç‡¥µ‡¥™‡µç‡¥® ‡¥ú‡µã‡¥≤‡¥ø ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡µÇ",
                placeholders: {
                    name: "‡¥µ‡¥ø‡¥¶‡µç‡¥Ø‡¥æ‡µº‡¥§‡µç‡¥•‡¥ø‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥™‡µá‡¥∞‡µç",
                    class: "‡¥ï‡µç‡¥≤‡¥æ‡¥∏‡µç",
                    age: "‡¥µ‡¥Ø‡¥∏‡µç‡¥∏‡µç",
                    place: "‡¥∏‡µç‡¥•‡¥≤‡¥Ç",
                    phone: "‡¥∞‡¥ï‡µç‡¥∑‡¥ø‡¥§‡¥æ‡¥µ‡¥ø‡µª‡µç‡¥±‡µÜ ‡¥´‡µã‡µ∫ ‡¥®‡¥Æ‡µç‡¥™‡µº"
                },
                btnStart: "‡¥§‡µÅ‡¥ü‡¥ô‡µç‡¥ô‡¥æ‡¥Ç üöÄ",
                btnAbout: "‡¥à ‡¥ï‡µç‡¥µ‡¥ø‡¥∏‡¥ø‡¥®‡µÜ‡¥ï‡µç‡¥ï‡µÅ‡¥±‡¥ø‡¥ö‡µç‡¥ö‡µç ‡¥ï‡µÇ‡¥ü‡µÅ‡¥§‡µΩ ‡¥Ö‡¥±‡¥ø‡¥Ø‡¥æ‡¥Ç ‚ÑπÔ∏è",
                aboutHead: "‡¥é‡¥®‡µç‡¥§‡¥æ‡¥£‡µç ‡¥π‡µã‡¥≥‡¥£‡µç‡¥ü‡µç ‡¥ï‡µã‡¥°‡µç (RIASEC)?",
                aboutBody: "‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥µ‡µç‡¥Ø‡¥ï‡µç‡¥§‡¥ø‡¥§‡µç‡¥µ‡¥Ç ‡¥í‡¥∞‡µÅ ‡¥™‡¥∏‡¥ø‡µΩ ‡¥™‡µã‡¥≤‡µÜ‡¥Ø‡¥æ‡¥£‡µÜ‡¥®‡µç‡¥®‡µç ‡¥∏‡¥ô‡µç‡¥ï‡µΩ‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï. ‡¥à ‡¥ó‡µÜ‡¥Ø‡¥ø‡¥Ç ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡µç ‡¥Ö‡¥®‡µÅ‡¥Ø‡µã‡¥ú‡µç‡¥Ø‡¥Æ‡¥æ‡¥Ø‡¥§‡µç ‡¥é‡¥®‡µç‡¥§‡¥æ‡¥£‡µÜ‡¥®‡µç‡¥®‡µç ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡µÅ‡¥®‡µç‡¥®‡µÅ! ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡µç <b>‡¥™‡µç‡¥∞‡¥µ‡µº‡¥§‡µç‡¥§‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª</b> (Realistic), <b>‡¥∏‡µÉ‡¥∑‡µç‡¥ü‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª</b> (Artistic), <b>‡¥∏‡¥π‡¥æ‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª</b> (Social), ‡¥Ö‡¥§‡µã <b>‡¥®‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª</b> (Enterprising) ‡¥Ü‡¥£‡µã ‡¥á‡¥∑‡µç‡¥ü‡¥Ç ‡¥é‡¥®‡µç‡¥®‡µç ‡¥á‡¥§‡µç ‡¥™‡¥∞‡¥ø‡¥∂‡µã‡¥ß‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ."
            }
        };

        // Current Language (Default English)
        let currentLang = 'en';

        // --- 2. SMOOTH LOADING LOGIC ---
        window.addEventListener('load', () => {
            const logo = document.getElementById('main-logo');
            const introPopup = document.getElementById('intro-popup');
            const langScreen = document.getElementById('language-screen');
            const loader = document.getElementById('initial-loader');

            const revealUI = () => {
                loader.style.display = 'none';
                introPopup.style.opacity = 1; 
                // Show Language Screen first
                langScreen.classList.remove('hidden');
                langScreen.classList.add('fade-in');
            };

            if (logo.complete) { revealUI(); } 
            else { logo.onload = revealUI; }
        });

        // --- 3. LANGUAGE SELECTION HANDLER ---
        function selectLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];

            // Apply translations to Form
            document.getElementById('lbl-title').innerHTML = t.title;
            document.getElementById('inp-name').placeholder = t.placeholders.name;
            document.getElementById('inp-class').placeholder = t.placeholders.class;
            document.getElementById('inp-age').placeholder = t.placeholders.age;
            document.getElementById('inp-place').placeholder = t.placeholders.place;
            document.getElementById('inp-phone').placeholder = t.placeholders.phone;
            document.getElementById('btn-start').innerText = t.btnStart;
            document.getElementById('btn-about-toggle').innerText = t.btnAbout;
            document.getElementById('about-head').innerText = t.aboutHead;
            document.getElementById('about-body').innerHTML = t.aboutBody;

            // Switch Screens
            document.getElementById('language-screen').classList.add('hidden');
            const formScreen = document.getElementById('form-screen');
            formScreen.classList.remove('hidden');
            formScreen.classList.add('fade-in');
        }

        function toggleAbout() {
            const modal = document.getElementById('about-modal');
            modal.style.display = (modal.style.display === 'block') ? 'none' : 'block';
        }

        // --- 4. CONFIGURATION & DATA ---
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwMX3bzvQa4Y8ZKUSxasxQvle82cRmfjx7XBwV_6LwyoWl-pVWx8rlJndWczaAQrLgTGw/exec"; 
        let userInfo = { name: "", class: "", age: "", place: "", phone: "" };

        function validateAndStart() {
            const name = document.getElementById('inp-name').value;
            const stuClass = document.getElementById('inp-class').value;
            const age = document.getElementById('inp-age').value;
            const place = document.getElementById('inp-place').value;
            const phone = document.getElementById('inp-phone').value;

            if(name === "" || stuClass === "" || age === "" || place === "" || phone === "") {
                alert(currentLang === 'ml' ? "‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥é‡¥≤‡µç‡¥≤‡¥æ ‡¥µ‡¥ø‡¥µ‡¥∞‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç ‡¥™‡µÇ‡¥∞‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï!" : "Please fill in all details to start!");
                return;
            }
            userInfo = { name, class: stuClass, age, place, phone };
            
            // UI Transition
            document.getElementById('intro-popup').style.display = 'none';
            document.getElementById('game-interface').classList.remove('hidden');
            document.getElementById('game-interface').classList.add('fade-in');
            loadScenario();
        }

        /* --- 5. GAME CONTENT (BILINGUAL) --- */
        const scenarios = [
            { 
                text: { en: "1. Village Center: What do you build first?", ml: "1. ‡¥ó‡µç‡¥∞‡¥æ‡¥Æ ‡¥ï‡µá‡¥®‡µç‡¥¶‡µç‡¥∞‡¥Ç: ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ ‡¥Ü‡¥¶‡µç‡¥Ø‡¥Ç ‡¥é‡¥®‡µç‡¥§‡µç ‡¥®‡¥ø‡µº‡¥Æ‡µç‡¥Æ‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç?" }, 
                emoji: "üèóÔ∏è", 
                options: [ 
                    { label: { en: "Machine Shop", ml: "‡¥µ‡µº‡¥ï‡µç‡¥ï‡µç‡¥∑‡µã‡¥™‡µç‡¥™‡µç" }, type: "Realistic", icon: "üîß" }, 
                    { label: { en: "Art School", ml: "‡¥ï‡¥≤‡¥æ ‡¥µ‡¥ø‡¥¶‡µç‡¥Ø‡¥æ‡¥≤‡¥Ø‡¥Ç" }, type: "Artistic", icon: "üé®" }, 
                    { label: { en: "Market", ml: "‡¥ö‡¥®‡µç‡¥§ (Market)" }, type: "Enterprising", icon: "üè™" }, 
                    { label: { en: "Clinic", ml: "‡¥Ü‡¥∂‡µÅ‡¥™‡¥§‡µç‡¥∞‡¥ø" }, type: "Social", icon: "ü©∫" } 
                ] 
            },
            { 
                text: { en: "2. The bridge is broken! You...", ml: "2. ‡¥™‡¥æ‡¥≤‡¥Ç ‡¥§‡¥ï‡µº‡¥®‡µç‡¥®‡µÅ! ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ ‡¥é‡¥®‡µç‡¥§‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥Ç?" }, 
                emoji: "üåâ", 
                options: [ 
                    { label: { en: "Build a raft", ml: "‡¥ö‡¥ô‡µç‡¥ô‡¥æ‡¥ü‡¥Ç ‡¥â‡¥£‡µç‡¥ü‡¥æ‡¥ï‡µç‡¥ï‡µÅ‡¥Ç" }, type: "Realistic", icon: "ü™µ" }, 
                    { label: { en: "Call for help", ml: "‡¥∏‡¥π‡¥æ‡¥Ø‡¥Ç ‡¥µ‡¥ø‡¥≥‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç" }, type: "Social", icon: "üì¢" }, 
                    { label: { en: "Design a new one", ml: "‡¥™‡µÅ‡¥§‡¥ø‡¥Ø‡¥§‡µç ‡¥µ‡¥∞‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µÅ‡¥Ç" }, type: "Artistic", icon: "üìê" }, 
                    { label: { en: "Hire a boat", ml: "‡¥¨‡µã‡¥ü‡µç‡¥ü‡µç ‡¥µ‡¥æ‡¥ü‡¥ï‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µç ‡¥é‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥Ç" }, type: "Enterprising", icon: "üö§" } 
                ] 
            },
            { 
                text: { en: "3. Onam Festival role?", ml: "3. ‡¥ì‡¥£‡¥æ‡¥ò‡µã‡¥∑‡¥§‡µç‡¥§‡¥ø‡µΩ ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥±‡µã‡µæ?" }, 
                emoji: "üå∏", 
                options: [ 
                    { label: { en: "Pookalam Design", ml: "‡¥™‡µÇ‡¥ï‡µç‡¥ï‡¥≥‡¥Ç ‡¥°‡¥ø‡¥∏‡µà‡µª" }, type: "Artistic", icon: "üå∫" }, 
                    { label: { en: "Serving Food", ml: "‡¥≠‡¥ï‡µç‡¥∑‡¥£‡¥Ç ‡¥µ‡¥ø‡¥≥‡¥Æ‡µç‡¥™‡µΩ" }, type: "Social", icon: "üçõ" }, 
                    { label: { en: "Stage Setup", ml: "‡¥∏‡µç‡¥±‡µç‡¥±‡µá‡¥ú‡µç ‡¥®‡¥ø‡µº‡¥Æ‡µç‡¥Æ‡¥æ‡¥£‡¥Ç" }, type: "Realistic", icon: "üî®" }, 
                    { label: { en: "Event Organizer", ml: "‡¥∏‡¥Ç‡¥ò‡¥æ‡¥ü‡¥ï‡µª" }, type: "Enterprising", icon: "üé§" } 
                ] 
            },
            { 
                text: { en: "4. Tourists need help. You...", ml: "4. ‡¥ü‡µÇ‡¥±‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µÅ‡¥ï‡µæ‡¥ï‡µç‡¥ï‡µç ‡¥µ‡¥¥‡¥ø ‡¥§‡µÜ‡¥±‡µç‡¥±‡¥ø. ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ..." }, 
                emoji: "üì∏", 
                options: [ 
                    { label: { en: "Drive the Jeep", ml: "‡¥ú‡µÄ‡¥™‡µç‡¥™‡µç ‡¥ì‡¥ü‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç" }, type: "Realistic", icon: "üöô" }, 
                    { label: { en: "Tell Stories", ml: "‡¥ï‡¥•‡¥ï‡µæ ‡¥™‡¥±‡¥Ø‡µÅ‡¥Ç" }, type: "Social", icon: "üó£Ô∏è" }, 
                    { label: { en: "Sell Souvenirs", ml: "‡¥∏‡¥æ‡¥ß‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥µ‡¥ø‡µΩ‡¥ï‡µç‡¥ï‡µÅ‡¥Ç" }, type: "Enterprising", icon: "üí∞" }, 
                    { label: { en: "Perform Dance", ml: "‡¥®‡µÉ‡¥§‡µç‡¥§‡¥Ç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥Ç" }, type: "Artistic", icon: "üíÉ" } 
                ] 
            },
            { 
                text: { en: "5. Lost Elephant! You...", ml: "5. ‡¥Ü‡¥® ‡¥á‡¥ü‡¥û‡µç‡¥û‡µÅ! ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ ‡¥é‡¥®‡µç‡¥§‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥Ç?" }, 
                emoji: "üêò", 
                options: [ 
                    { label: { en: "Build Fence", ml: "‡¥µ‡µá‡¥≤‡¥ø ‡¥ï‡µÜ‡¥ü‡µç‡¥ü‡µÅ‡¥Ç" }, type: "Realistic", icon: "üöß" }, 
                    { label: { en: "Comfort It", ml: "‡¥Ö‡¥§‡¥ø‡¥®‡µÜ ‡¥∂‡¥æ‡¥®‡µç‡¥§‡¥Æ‡¥æ‡¥ï‡µç‡¥ï‡µÅ‡¥Ç" }, type: "Social", icon: "‚ù§Ô∏è" }, 
                    { label: { en: "Take Photos", ml: "‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥é‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥Ç" }, type: "Artistic", icon: "üì∑" }, 
                    { label: { en: "Lead Rescue", ml: "‡¥∞‡¥ï‡µç‡¥∑‡¥æ‡¥™‡µç‡¥∞‡¥µ‡µº‡¥§‡µç‡¥§‡¥®‡¥Ç ‡¥®‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç" }, type: "Enterprising", icon: "üö©" } 
                ] 
            },
            { 
                text: { en: "6. Coconut Harvest. You...", ml: "6. ‡¥§‡µá‡¥ô‡µç‡¥ô ‡¥µ‡¥ø‡¥≥‡¥µ‡µÜ‡¥ü‡µÅ‡¥™‡µç‡¥™‡µç. ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ..." }, 
                emoji: "ü••", 
                options: [ 
                    { label: { en: "Climb & Pluck", ml: "‡¥ï‡¥Ø‡¥±‡¥ø ‡¥™‡¥±‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç" }, type: "Realistic", icon: "üßó" }, 
                    { label: { en: "Count & Sell", ml: "‡¥é‡¥£‡µç‡¥£‡¥ø ‡¥µ‡¥ø‡µΩ‡¥ï‡µç‡¥ï‡µÅ‡¥Ç" }, type: "Enterprising", icon: "üìù" }, 
                    { label: { en: "Make Crafts", ml: "‡¥ö‡¥ø‡¥∞‡¥ü‡µç‡¥ü ‡¥ï‡µä‡¥£‡µç‡¥ü‡µç ‡¥ï‡¥≤‡¥æ‡¥∞‡µÇ‡¥™‡¥Ç" }, type: "Artistic", icon: "ü•£" }, 
                    { label: { en: "Share with All", ml: "‡¥é‡¥≤‡µç‡¥≤‡¥æ‡¥µ‡µº‡¥ï‡µç‡¥ï‡µÅ‡¥Ç ‡¥™‡¥ô‡µç‡¥ï‡¥ø‡¥ü‡µÅ‡¥Ç" }, type: "Social", icon: "ü§ù" } 
                ] 
            },
            { 
                text: { en: "7. School Club. You start...", ml: "7. ‡¥∏‡µç‡¥ï‡µÇ‡µæ ‡¥ï‡µç‡¥≤‡¥¨‡µç‡¥¨‡µç. ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ ‡¥§‡µÅ‡¥ü‡¥ô‡µç‡¥ô‡µÅ‡¥®‡µç‡¥®‡¥§‡µç..." }, 
                emoji: "üè´", 
                options: [ 
                    { label: { en: "Robotics", ml: "‡¥±‡µã‡¥¨‡µã‡¥ü‡µç‡¥ü‡¥ø‡¥ï‡µç‡¥∏‡µç" }, type: "Realistic", icon: "ü§ñ" }, 
                    { label: { en: "Drama/Music", ml: "‡¥®‡¥æ‡¥ü‡¥ï‡¥Ç/‡¥ó‡¥æ‡¥®‡¥Ç" }, type: "Artistic", icon: "üé≠" }, 
                    { label: { en: "Debate Team", ml: "‡¥°‡¥ø‡¥¨‡µá‡¥±‡µç‡¥±‡µç ‡¥ü‡µÄ‡¥Ç" }, type: "Enterprising", icon: "‚öñÔ∏è" }, 
                    { label: { en: "Charity Club", ml: "‡¥∏‡µá‡¥µ‡¥® ‡¥∏‡¥Ç‡¥ò‡¥Ç" }, type: "Social", icon: "üåø" } 
                ] 
            },
            { 
                text: { en: "8. Plastic on beach. You...", ml: "8. ‡¥¨‡µÄ‡¥ö‡µç‡¥ö‡¥ø‡µΩ ‡¥™‡µç‡¥≤‡¥æ‡¥∏‡µç‡¥±‡µç‡¥±‡¥ø‡¥ï‡µç ‡¥Æ‡¥æ‡¥≤‡¥ø‡¥®‡µç‡¥Ø‡¥Ç..." }, 
                emoji: "üèñÔ∏è", 
                options: [ 
                    { label: { en: "Make Posters", ml: "‡¥™‡µã‡¥∏‡µç‡¥±‡µç‡¥±‡µº ‡¥µ‡¥∞‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µÅ‡¥Ç" }, type: "Artistic", icon: "üñåÔ∏è" }, 
                    { label: { en: "Pick it Up", ml: "‡¥™‡µÜ‡¥±‡µÅ‡¥ï‡µç‡¥ï‡¥ø ‡¥Æ‡¥æ‡¥±‡µç‡¥±‡µÅ‡¥Ç" }, type: "Realistic", icon: "üß§" }, 
                    { label: { en: "Recycling Biz", ml: "‡¥±‡µÄ‡¥∏‡µà‡¥ï‡µç‡¥≤‡¥ø‡¥Ç‡¥ó‡µç ‡¥¨‡¥ø‡¥∏‡¥ø‡¥®‡¥∏‡µç" }, type: "Enterprising", icon: "‚ôªÔ∏è" }, 
                    { label: { en: "Clean Together", ml: "‡¥ï‡µÇ‡¥ü‡µç‡¥ü‡µÅ‡¥ï‡¥æ‡¥∞‡µÜ ‡¥ï‡µÇ‡¥ü‡µç‡¥ü‡¥ø ‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥ø‡¥Ø‡¥æ‡¥ï‡µç‡¥ï‡µÅ‡¥Ç" }, type: "Social", icon: "üëØ" } 
                ] 
            },
            { 
                text: { en: "9. Boat Race Role?", ml: "9. ‡¥µ‡¥≥‡µç‡¥≥‡¥Ç‡¥ï‡¥≥‡¥ø‡¥Ø‡¥ø‡µΩ ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥±‡µã‡µæ?" }, 
                emoji: "üö£", 
                options: [ 
                    { label: { en: "The Captain", ml: "‡¥ï‡µç‡¥Ø‡¥æ‡¥™‡µç‡¥±‡µç‡¥±‡µª (‡¥®‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡¥Ø‡¥æ‡µæ)" }, type: "Enterprising", icon: "üì¢" }, 
                    { label: { en: "The Rower", ml: "‡¥§‡µÅ‡¥¥‡¥ö‡µç‡¥ö‡¥ø‡¥≤‡µÅ‡¥ï‡¥æ‡¥∞‡µª" }, type: "Realistic", icon: "üí™" }, 
                    { label: { en: "Boat Decorator", ml: "‡¥µ‡¥≥‡µç‡¥≥‡¥Ç ‡¥Ö‡¥≤‡¥ô‡µç‡¥ï‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡¥Ø‡¥æ‡µæ" }, type: "Artistic", icon: "‚ú®" }, 
                    { label: { en: "Cheerleader", ml: "‡¥Ü‡¥µ‡µá‡¥∂‡¥Ç ‡¥®‡µΩ‡¥ï‡µÅ‡¥®‡µç‡¥®‡¥Ø‡¥æ‡µæ" }, type: "Social", icon: "üéâ" } 
                ] 
            },
            { 
                text: { en: "10. Gift for Village?", ml: "10. ‡¥ó‡µç‡¥∞‡¥æ‡¥Æ‡¥§‡µç‡¥§‡¥ø‡¥®‡µç ‡¥í‡¥∞‡µÅ ‡¥∏‡¥Æ‡µç‡¥Æ‡¥æ‡¥®‡¥Ç?" }, 
                emoji: "üéÅ", 
                options: [ 
                    { label: { en: "Library", ml: "‡¥µ‡¥æ‡¥Ø‡¥®‡¥∂‡¥æ‡¥≤" }, type: "Social", icon: "üìö" }, 
                    { label: { en: "Solar Plant", ml: "‡¥∏‡µã‡¥≥‡¥æ‡µº ‡¥™‡µç‡¥≤‡¥æ‡¥®‡µç‡¥±‡µç" }, type: "Realistic", icon: "‚òÄÔ∏è" }, 
                    { label: { en: "Cinema", ml: "‡¥∏‡¥ø‡¥®‡¥ø‡¥Æ ‡¥§‡µÄ‡¥Ø‡µá‡¥±‡µç‡¥±‡µº" }, type: "Artistic", icon: "üé¨" }, 
                    { label: { en: "Mall", ml: "‡¥Æ‡¥æ‡µæ (‡¥∑‡µã‡¥™‡µç‡¥™‡¥ø‡¥Ç‡¥ó‡µç)" }, type: "Enterprising", icon: "üõçÔ∏è" } 
                ] 
            },
            // RAPID FIRE
            { 
                text: { en: "11. Pick an object!", ml: "11. ‡¥í‡¥∞‡µÜ‡¥£‡µç‡¥£‡¥Ç ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÇ!" }, 
                emoji: "‚ö°", 
                options: [ 
                    { label: { en: "Microscope", ml: "‡¥Æ‡µà‡¥ï‡µç‡¥∞‡µã‡¥∏‡µç‡¥ï‡µã‡¥™‡µç‡¥™‡µç" }, type: "Realistic", icon: "üî¨" }, 
                    { label: { en: "Paintbrush", ml: "‡¥¨‡µç‡¥∞‡¥∑‡µç & ‡¥™‡µÜ‡¥Ø‡¥ø‡¥®‡µç‡¥±‡µç" }, type: "Artistic", icon: "üñåÔ∏è" }, 
                    { label: { en: "Megaphone", ml: "‡¥Æ‡µÜ‡¥ó‡¥æ‡¥´‡µã‡µ∫ (‡¥Æ‡µà‡¥ï‡µç‡¥ï‡µç)" }, type: "Enterprising", icon: "üì£" }, 
                    { label: { en: "First Aid Kit", ml: "‡¥´‡¥∏‡µç‡¥±‡µç‡¥±‡µç ‡¥é‡¥Ø‡µç‡¥°‡µç ‡¥ï‡¥ø‡¥±‡µç‡¥±‡µç" }, type: "Social", icon: "ü©π" } 
                ] 
            },
            { 
                text: { en: "12. Pick a workspace!", ml: "12. ‡¥ú‡µã‡¥≤‡¥ø‡¥∏‡µç‡¥•‡¥≤‡¥Ç ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÇ!" }, 
                emoji: "‚ö°", 
                options: [ 
                    { label: { en: "Garage/Lab", ml: "‡¥≤‡¥æ‡¥¨‡µç / ‡¥ó‡¥æ‡¥∞‡µá‡¥ú‡µç" }, type: "Realistic", icon: "‚öôÔ∏è" }, 
                    { label: { en: "Studio", ml: "‡¥∏‡µç‡¥±‡µç‡¥±‡µÅ‡¥°‡¥ø‡¥Ø‡µã" }, type: "Artistic", icon: "üéª" }, 
                    { label: { en: "Office/Boardroom", ml: "‡¥ì‡¥´‡µÄ‡¥∏‡µç" }, type: "Enterprising", icon: "üíº" }, 
                    { label: { en: "Hospital/School", ml: "‡¥∏‡µç‡¥ï‡µÇ‡µæ / ‡¥Ü‡¥∂‡µÅ‡¥™‡¥§‡µç‡¥∞‡¥ø" }, type: "Social", icon: "üè•" } 
                ] 
            },
            { 
                text: { en: "13. Pick a hobby!", ml: "13. ‡¥í‡¥∞‡µÅ ‡¥π‡µã‡¥¨‡¥ø ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÇ!" }, 
                emoji: "‚ö°", 
                options: [ 
                    { label: { en: "Fixing Bikes", ml: "‡¥µ‡¥æ‡¥π‡¥®‡¥Ç ‡¥®‡¥®‡µç‡¥®‡¥æ‡¥ï‡µç‡¥ï‡µΩ" }, type: "Realistic", icon: "üö≤" }, 
                    { label: { en: "Writing Songs", ml: "‡¥™‡¥æ‡¥ü‡µç‡¥ü‡µç ‡¥é‡¥¥‡µÅ‡¥§‡µΩ" }, type: "Artistic", icon: "üìù" }, 
                    { label: { en: "Trading Cards", ml: "‡¥¨‡¥ø‡¥∏‡¥ø‡¥®‡¥∏‡µç ‡¥ó‡µÜ‡¥Ø‡¥ø‡¥Ç" }, type: "Enterprising", icon: "üÉè" }, 
                    { label: { en: "Teaching Kids", ml: "‡¥ï‡µÅ‡¥ü‡µç‡¥ü‡¥ø‡¥ï‡¥≥‡µÜ ‡¥™‡¥†‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µΩ" }, type: "Social", icon: "üë∂" } 
                ] 
            },
            { 
                text: { en: "14. Pick a hero!", ml: "14. ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥π‡µÄ‡¥±‡µã ‡¥Ü‡¥∞‡¥æ‡¥£‡µç?" }, 
                emoji: "‚ö°", 
                options: [ 
                    { label: { en: "Inventor", ml: "‡¥∂‡¥æ‡¥∏‡µç‡¥§‡µç‡¥∞‡¥ú‡µç‡¥û‡µª" }, type: "Realistic", icon: "üí°" }, 
                    { label: { en: "Artist", ml: "‡¥ï‡¥≤‡¥æ‡¥ï‡¥æ‡¥∞‡µª" }, type: "Artistic", icon: "üé≠" }, 
                    { label: { en: "CEO", ml: "‡¥¨‡¥ø‡¥∏‡¥ø‡¥®‡¥∏‡µç‡¥∏‡µÅ‡¥ï‡¥æ‡¥∞‡µª" }, type: "Enterprising", icon: "üëî" }, 
                    { label: { en: "Activist", ml: "‡¥∏‡¥æ‡¥Æ‡µÇ‡¥π‡µç‡¥Ø ‡¥™‡µç‡¥∞‡¥µ‡µº‡¥§‡µç‡¥§‡¥ï‡µª" }, type: "Social", icon: "üïäÔ∏è" } 
                ] 
            },
            { 
                text: { en: "15. Final Choice!", ml: "15. ‡¥Ö‡¥µ‡¥∏‡¥æ‡¥® ‡¥ö‡µã‡¥¶‡µç‡¥Ø‡¥Ç!" }, 
                emoji: "üåü", 
                options: [ 
                    { label: { en: "Tools", ml: "‡¥ü‡µÇ‡¥≥‡µÅ‡¥ï‡µæ (Tools)" }, type: "Realistic", icon: "üî®" }, 
                    { label: { en: "Colors", ml: "‡¥®‡¥ø‡¥±‡¥ô‡µç‡¥ô‡µæ" }, type: "Artistic", icon: "üåà" }, 
                    { label: { en: "Money", ml: "‡¥™‡¥£‡¥Ç" }, type: "Enterprising", icon: "üí∞" }, 
                    { label: { en: "People", ml: "‡¥Ü‡¥≥‡µÅ‡¥ï‡µæ" }, type: "Social", icon: "‚ù§Ô∏è" } 
                ] 
            }
        ];

        let currentStep = 0;
        let scores = { Realistic: 0, Artistic: 0, Enterprising: 0, Social: 0 };
        let historyStack = [];

        function loadScenario() {
            if (currentStep >= scenarios.length) { showResults(); return; }
            
            const backBtn = document.getElementById('btn-back');
            if(currentStep === 0) {
                backBtn.classList.add('hidden');
            } else {
                backBtn.classList.remove('hidden');
            }

            const data = scenarios[currentStep];
            // LOGIC CHANGE: Select text based on currentLang
            document.getElementById('scenario-text').innerText = data.text[currentLang];
            document.getElementById('scene-emoji').innerText = data.emoji;
            
            let shuffledOptions = [...data.options].sort(() => Math.random() - 0.5);
            
            const container = document.getElementById('options-container');
            container.innerHTML = ''; 
            
            shuffledOptions.forEach(opt => {
                const btn = document.createElement('div');
                btn.className = 'option-card';
                // LOGIC CHANGE: Select label based on currentLang
                btn.innerHTML = `<span style="font-size:1.5rem">${opt.icon}</span><strong style="margin-top:5px">${opt.label[currentLang]}</strong>`;
                btn.onclick = () => handleChoice(opt.type);
                container.appendChild(btn);
            });

            document.getElementById('progress-bar').style.width = ((currentStep) / scenarios.length) * 100 + "%";
        }

        function handleChoice(type) { 
            scores[type]++; 
            historyStack.push(type); 
            currentStep++; 
            loadScenario(); 
        }

        function goBack() {
            if (currentStep <= 0) return;
            const lastType = historyStack.pop();
            if (lastType) { scores[lastType]--; }
            currentStep--;
            loadScenario();
        }

        /* --- 6. RESULTS (BILINGUAL) --- */
        function showResults() {
            document.getElementById('game-interface').classList.add('hidden');
            const resScreen = document.getElementById('screen-result');
            resScreen.classList.remove('hidden');
            resScreen.classList.add('fade-in');

            let sortedScores = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            let topTrait = sortedScores[0][0];
            let secondTrait = sortedScores[1][0];

            // RESULT TITLES IN BOTH LANGUAGES
            const hybridData = {
                "Realistic-Artistic": { 
                    title: { en: "The Design Engineer üìê", ml: "‡¥°‡¥ø‡¥∏‡µà‡µª ‡¥é‡¥û‡µç‡¥ö‡¥ø‡¥®‡µÄ‡¥Ø‡µº üìê" },
                    career: ["Architect", "Product Designer", "Game Developer", "Animator", "Landscape Designer"] 
                },
                "Realistic-Social": { 
                    title: { en: "The Medical Healer ü©∫", ml: "‡¥Æ‡µÜ‡¥°‡¥ø‡¥ï‡µç‡¥ï‡µΩ ‡¥π‡µÄ‡¥≤‡µº / ‡¥°‡µã‡¥ï‡µç‡¥ü‡µº ü©∫" },
                    career: ["Surgeon", "Veterinarian", "Sports Coach", "Physiotherapist", "Firefighter"] 
                },
                "Realistic-Enterprising": { 
                    title: { en: "The Builder Captain üèóÔ∏è", ml: "‡¥®‡¥ø‡µº‡¥Æ‡µç‡¥Æ‡¥æ‡¥£ ‡¥µ‡¥ø‡¥¶‡¥ó‡µç‡¥ß‡µª üèóÔ∏è" },
                    career: ["Pilot", "Civil Engineer", "Factory Manager", "Farm Owner", "Logistics Head"] 
                },
                "Artistic-Realistic": { 
                    title: { en: "The Digital Creator üíª", ml: "‡¥°‡¥ø‡¥ú‡¥ø‡¥±‡µç‡¥±‡µΩ ‡¥ï‡µç‡¥∞‡¥ø‡¥Ø‡µá‡¥±‡µç‡¥±‡µº üíª" },
                    career: ["UX/UI Designer", "Sound Engineer", "Photographer", "Fashion Designer", "Chef"] 
                },
                "Artistic-Social": { 
                    title: { en: "The Inspiring Teacher üé≠", ml: "‡¥Ö‡¥ß‡µç‡¥Ø‡¥æ‡¥™‡¥ï‡µª / ‡¥ï‡¥≤‡¥æ‡¥ï‡¥æ‡¥∞‡µª üé≠" },
                    career: ["Drama Teacher", "Art Therapist", "Journalist", "Travel Guide", "Counselor"] 
                },
                "Artistic-Enterprising": { 
                    title: { en: "The Media Star üé¨", ml: "‡¥Æ‡µÄ‡¥°‡¥ø‡¥Ø ‡¥∏‡µç‡¥±‡µç‡¥±‡¥æ‡µº / ‡¥∏‡¥Ç‡¥µ‡¥ø‡¥ß‡¥æ‡¥Ø‡¥ï‡µª üé¨" },
                    career: ["Film Director", "Advertising Head", "Event Planner", "Social Media Influencer", "Brand Manager"] 
                },
                "Social-Realistic": { 
                    title: { en: "The Hands-on Helper üöë", ml: "‡¥∏‡µá‡¥µ‡¥® ‡¥∏‡¥®‡µç‡¥®‡¥¶‡µç‡¥ß‡µª üöë" },
                    career: ["Nurse", "Police Officer", "Paramedic", "Agriculture Officer", "Zoologist"] 
                },
                "Social-Artistic": { 
                    title: { en: "The Storyteller üó£Ô∏è", ml: "‡¥é‡¥¥‡µÅ‡¥§‡µç‡¥§‡µÅ‡¥ï‡¥æ‡¥∞‡µª / ‡¥ï‡¥•‡¥æ‡¥ï‡¥æ‡¥∞‡µª üó£Ô∏è" },
                    career: ["Psychologist", "Speech Therapist", "Librarian", "Author/Writer", "Primary Teacher"] 
                },
                "Social-Enterprising": { 
                    title: { en: "The Team Leader ü§ù", ml: "‡¥ü‡µÄ‡¥Ç ‡¥≤‡µÄ‡¥°‡µº / ‡¥Æ‡¥æ‡¥®‡µá‡¥ú‡µº ü§ù" },
                    career: ["School Principal", "HR Manager", "Hotel Manager", "NGO Leader", "TV Host"] 
                },
                "Enterprising-Realistic": { 
                    title: { en: "The Tech Boss üöÄ", ml: "‡¥ü‡µÜ‡¥ï‡µç ‡¥¨‡µã‡¥∏‡µç / ‡¥¨‡¥ø‡¥∏‡¥ø‡¥®‡¥∏‡µÅ‡¥ï‡¥æ‡¥∞‡µª üöÄ" },
                    career: ["Startup Founder", "Stock Trader", "Real Estate Developer", "Tech CEO", "Bank Manager"] 
                },
                "Enterprising-Artistic": { 
                    title: { en: "The Visionary üí°", ml: "‡¥µ‡¥ø‡¥∑‡¥®‡¥±‡¥ø / ‡¥Ü‡¥∂‡¥Ø‡¥∞‡µÇ‡¥™‡µÄ‡¥ï‡µº‡¥§‡µç‡¥§‡¥æ‡¥µ‡µç üí°" },
                    career: ["Marketing Director", "Creative Director", "Fashion Buyer", "Talent Agent", "Publicist"] 
                },
                "Enterprising-Social": { 
                    title: { en: "The Public Leader üèõÔ∏è", ml: "‡¥ú‡¥®‡¥®‡µá‡¥§‡¥æ‡¥µ‡µç / ‡¥µ‡¥ï‡µç‡¥ï‡µÄ‡µΩ üèõÔ∏è" },
                    career: ["Politician", "Lawyer", "Social Entrepreneur", "Hospital Admin", "Diplomat"] 
                }
            };

            let key = topTrait + "-" + secondTrait;
            let profile = hybridData[key];
            
            // Fallback
            if (!profile) {
                profile = { 
                    title: { en: "The Master " + topTrait, ml: topTrait + " ‡¥µ‡¥ø‡¥¶‡¥ó‡µç‡¥ß‡µª" },
                    career: ["Specialist in " + topTrait, "Researcher", "Consultant", "Analyst", "Innovator"]
                };
            }

            // Display Title
            document.getElementById('result-title').innerText = profile.title[currentLang];
            
            const traitSentences = {
                "Realistic": { 
                    en: "You like using tools, fixing broken things, and understanding how machines work.", 
                    ml: "‡¥ü‡µÇ‡¥≥‡µÅ‡¥ï‡µæ ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥®‡µÅ‡¥Ç, ‡¥Ø‡¥®‡µç‡¥§‡µç‡¥∞‡¥ô‡µç‡¥ô‡µæ ‡¥é‡¥ô‡µç‡¥ô‡¥®‡µÜ ‡¥™‡µç‡¥∞‡¥µ‡µº‡¥§‡µç‡¥§‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ ‡¥é‡¥®‡µç‡¥®‡µç ‡¥Æ‡¥®‡¥∏‡µç‡¥∏‡¥ø‡¥≤‡¥æ‡¥ï‡µç‡¥ï‡¥æ‡¥®‡µÅ‡¥Ç ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡µç ‡¥á‡¥∑‡µç‡¥ü‡¥Æ‡¥æ‡¥£‡µç." 
                },
                "Artistic": { 
                    en: "You have a colorful imagination and love to create new things or ideas.", 
                    ml: "‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡µç ‡¥®‡¥≤‡µç‡¥≤ ‡¥≠‡¥æ‡¥µ‡¥®‡¥æ‡¥∂‡µá‡¥∑‡¥ø‡¥Ø‡µÅ‡¥£‡µç‡¥ü‡µç. ‡¥™‡µÅ‡¥§‡¥ø‡¥Ø ‡¥ï‡¥æ‡¥∞‡µç‡¥Ø‡¥ô‡µç‡¥ô‡µæ ‡¥∏‡µÉ‡¥∑‡µç‡¥ü‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡µç ‡¥á‡¥∑‡µç‡¥ü‡¥Æ‡¥æ‡¥£‡µç." 
                },
                "Social": { 
                    en: "You are a kind friend who loves helping people and solving their problems.", 
                    ml: "‡¥Æ‡¥±‡µç‡¥±‡µÅ‡¥≥‡µç‡¥≥‡¥µ‡¥∞‡µÜ ‡¥∏‡¥π‡¥æ‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥®‡µÅ‡¥Ç ‡¥Ö‡¥µ‡¥∞‡µÅ‡¥ü‡µÜ ‡¥™‡µç‡¥∞‡¥∂‡µç‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥™‡¥∞‡¥ø‡¥π‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥®‡µÅ‡¥Ç ‡¥á‡¥∑‡µç‡¥ü‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥®‡µç‡¥® ‡¥í‡¥∞‡µÅ ‡¥®‡¥≤‡µç‡¥≤ ‡¥∏‡µÅ‡¥π‡µÉ‡¥§‡µç‡¥§‡¥æ‡¥£‡µç ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ." 
                },
                "Enterprising": { 
                    en: "You are brave, confident, and you like leading your team to success.", 
                    ml: "‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡µç ‡¥Ü‡¥§‡µç‡¥Æ‡¥µ‡¥ø‡¥∂‡µç‡¥µ‡¥æ‡¥∏‡¥Æ‡µÅ‡¥£‡µç‡¥ü‡µç. ‡¥í‡¥∞‡µÅ ‡¥ü‡µÄ‡¥Æ‡¥ø‡¥®‡µÜ ‡¥µ‡¥ø‡¥ú‡¥Ø‡¥§‡µç‡¥§‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ‡¥®‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡µç ‡¥ï‡¥¥‡¥ø‡¥µ‡µÅ‡¥£‡µç‡¥ü‡µç." 
                }
            };

            document.getElementById('traits-list').innerHTML = `
                <div style="margin-bottom:5px">‚úÖ ${traitSentences[topTrait][currentLang]}</div>
                <div>‚ú® ${traitSentences[secondTrait][currentLang]}</div>
            `;
            
            const cList = document.getElementById('career-list');
            cList.innerHTML = "";
            // Careers remain in English as they are technical terms, but you can translate them if needed
            profile.career.forEach(c => { cList.innerHTML += `<li class="career-li">${c}</li>`; });

            sendDataToGoogleScript(profile.title.en, topTrait, scores); // Save English Title for easier analytics
        }

        function sendDataToGoogleScript(resultTitle, topTrait, fullScores) {
            const statusBox = document.getElementById('save-status');
            statusBox.innerText = currentLang === 'ml' ? "‡¥∏‡µá‡¥µ‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡µÅ..." : "Saving result...";

            const dataPayload = {
                Name: userInfo.name,
                Class: userInfo.class, 
                Age: userInfo.age,
                Place: userInfo.place,
                Phone: userInfo.phone,
                Result: resultTitle,
                Top_Score: topTrait,
                Scores_Detail: JSON.stringify(fullScores),
                Language: currentLang
            };

            fetch(GOOGLE_SCRIPT_URL, {
                method: "POST",
                mode: "no-cors", 
                headers: { "Content-Type": "text/plain" },
                body: JSON.stringify(dataPayload)
            }).then(() => {
                statusBox.innerText = currentLang === 'ml' ? "‚úÖ ‡¥µ‡¥ø‡¥ú‡¥Ø‡¥ø‡¥ö‡µç‡¥ö‡µÅ!" : "‚úÖ Result Saved Successfully!";
                statusBox.style.color = "green";
            }).catch(err => {
                console.error(err);
                statusBox.innerText = "‚ö†Ô∏è Error Saving Data.";
                statusBox.style.color = "red";
            });
        }
    </script>
</body>
</html>
